# LiveKit Token Generation - How It Works

## âœ… Answer: Tokens are Generated by YOUR Code

**You do NOT need to manually generate tokens from LiveKit dashboard.**

Your application automatically generates tokens programmatically using your API Key and Secret.

---

## ğŸ”‘ What You Need from LiveKit Dashboard

From your `.env.production` file:

```bash
LIVEKIT_URL=wss://tavus-agent-project-i82x78jc.livekit.cloud
LIVEKIT_API_KEY=APIJL8zayDiwTwV
LIVEKIT_API_SECRET=fYtfW6HKKiaqxAcEhmRR4OTjZcyJbfWov4Bi9ezUvfFA
```

These are **permanent credentials** from LiveKit Cloud dashboard.

---

## ğŸ“‹ Token Generation Flow

### Step 1: User Starts a Call
Frontend requests token from YOUR backend

### Step 2: Backend Generates Token
Your code creates a JWT token using API Key + Secret

### Step 3: Frontend Uses Token
Connects to LiveKit Cloud with the generated token

---

## ğŸ’» Code Examples

### Frontend Token Request
```typescript
const response = await fetch('/api/token', {
  method: 'POST',
  body: JSON.stringify({
    roomName: 'ornina-123',
    identity: 'user-456'
  })
})
```

### Backend Token Generation
```typescript
// pages/api/token.ts
const at = new AccessToken(
  process.env.LIVEKIT_API_KEY,
  process.env.LIVEKIT_API_SECRET,
  { identity: 'user-456', ttl: '1h' }
)

at.addGrant({
  room: 'ornina-123',
  roomJoin: true,
  canPublish: true,
  canSubscribe: true,
})

const token = await at.toJwt()
```

---

## ğŸ” Why This Way?

1. **Security**: API Secret never exposed to users
2. **Control**: You decide who joins which rooms
3. **Temporary**: Tokens expire (1 hour default)
4. **Permissions**: Each token has specific access rights

---

## âœ… Your Current Setup

All working correctly:
- âœ… API credentials configured in `.env.production`
- âœ… Token generation code in `/pages/api/token.ts`
- âœ… Call Center also generates tokens in `livekit_manager.py`
- âœ… Frontend requests tokens automatically

**No manual token generation needed!**
